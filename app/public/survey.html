<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Friend Finder Survey Page</title>

	<!-- Latest compiled and minified CSS & JS -->
	<!-- Chosen -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>


	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<!-- Font Awesome Glyphicons -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

		<!-- Chosen -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>

<body>

	<div class="container">
        <div>
        <h2>Survey Questions</h2>
        <h3><strong>Who are You?</strong></h3>
        <h4>Name (Required)</h4>
        <input type="text" name="" id="name" class="form-control" required >

		<h4>Link to Photo Image (Required)</h4>
        <input type="text" name="" id="photo" class="form-control" required >
        <hr>
        
<!--Question 1-->
		<h3><strong>Question 1</strong></h3>
        <h4>You think animals are paw-some.</h4>
        <select data-placeholder="" class="chosen-select" id="q1">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
<!--Question 2-->
		<h3><strong>Question 2</strong></h3>
        <h4>You could sleep for 14 + hours in one day.</h4>
        <select data-placeholder="" class="chosen-select" id="q2">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
<!--Question 3-->
		<h3><strong>Question 3</strong></h3>
        <h4>Vacuums have no place in this world.</h4>
        <select data-placeholder="" class="chosen-select" id="q3">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
<!--Question 4-->
		<h3><strong>Question 4</strong></h3>
        <h4>You are generally an outdoors type of cerature.</h4>
        <select data-placeholder="" class="chosen-select" id="q4">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
<!--Question 5-->
		<h3><strong>Question 5</strong></h3>
        <h4>Your goal is to master the art of doing nothing all day, every day.</h4>
        <select data-placeholder="" class="chosen-select" id="q5">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
<!--Question 6-->
		<h3><strong>Question 6</strong></h3>
        <h4>You don't care, generally.</h4>
        <select data-placeholder="" class="chosen-select" id="q6">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
<!--Question 7-->
		<h3><strong>Question 7</strong></h3>
        <h4>Working is for human slaves.</h4>
        <select data-placeholder="" class="chosen-select" id="q7">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
<!--Question 8-->
		<h3><strong>Question 8</strong></h3>
        <h4>You never reject a paper ball.</h4>
        <select data-placeholder="" class="chosen-select" id="q8">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
<!--Question 9-->
		<h3><strong>Question 9</strong></h3>
        <h4>Couches are for scratching... duh.</h4>
        <select data-placeholder="" class="chosen-select" id="q9">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
<!--Question 10-->
		<h3><strong>Question 10</strong></h3>
        <h4>You have considered attending catnippers anonymous.</h4>
        <select data-placeholder="" class="chosen-select" id="q10">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

		<br>
		<br>

		<!-- Submit Button -->
		<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>Submit</button>

        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends List</a> | <a href="git@github.com:lvanok/FriendFinder.git">GitHub Repo</a></p>
            </div>
        </footer>

	</div>

	<!-- Modal -->
<div id="resultsModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h2 class="modal-title"><strong>Best Match</strong></h2>
        </div>
    <!-- Modal body-->
        <div class="modal-body">
            <h2 id="matchName"></h2>
            <img id="matchImg" src="/assets/images/catavatar.png" alt="Meow">
        </div>
    <!-- Footer-->
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
	</div>

    </div>
</div>

<!-- //This below will send the entries that the user provided to the server -->

<script type="text/javascript">
  	// Chosen CSS
    var config = {
        '.chosen-select'           : {},
        '.chosen-select-deselect'  : {allow_single_deselect:true},
        '.chosen-select-no-single' : {disable_search_threshold:10},
        '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
        '.chosen-select-width'     : {width:"95%"}
    }
    for (var selector in config) {
        $(selector).chosen(config[selector]);
    }
    // Grab the user's input (what they wrote on the form) 
    $("#submit").on("click", function(){
    	// Form validation
        function validateForm() {
            var isValid = true;
            $('.form-control').each(function() {
                if ( $(this).val() === '' )
                isValid = false;
            });
            $('.chosen-select').each(function() {
                if( $(this).val() === "")
                isValid = false
            })
            return isValid;
        }
        
        // If all required fields are complete
        if (validateForm() == true){
            //make an object for the user's provided information
            var userData = {
                name: $("#name").val(),
                photo: $("#photo").val(),
                scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
            }
            // Take the URL of the website
            var currentURL = window.location.origin;
            // using AJAX, post this information on the friends API. 
            $.post(currentURL + "/api/friends", userData, function(data){
            // Store the result from the AJAX, this will enable us to post the best match (name & photo)
            $("#matchName").text(data.name);
            $('#matchImg').attr("src", data.photo);
            // This modal displays the best match 
            $("#resultsModal").modal('toggle');
        });
		} else {
            alert("Please fill out all fields before submitting");
        } return false;
    });
</script>


</body>
</html>

<!-- Compatibility should be determined based on the following.
Each user's results should be converted into a simple array of numbers (ex: [5, 1, 4, 4, 5, 1, 2, 5, 4, 1]).
You will then compare the difference between the user's scores against other users' scores, question by question. You will then add up the differences to calculate the totalDifference.
Example:
User 1: [5, 1, 4, 4, 5, 1, 2, 5, 4, 1]
User 2: [3, 2, 6, 4, 5, 1, 2, 5, 4, 1]
Total Difference: 2 + 1 + 2 = 5
Remember to use the absolute value of the differences (i.e 5-3 and 3-5 should both be 2).
The person with the closest match should be the one with the "least" amount of difference.
Once you've determined the closest match, display the result back to the user in the form of a modal pop-up.
The result should display both-->